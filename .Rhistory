library(quantmod)
library(tidyquant)
getSymbols("VTI", src = "yahoo", from = '2016-01-19', to = Sys.Date()-1)
getSymbols("VNQ", src = "yahoo", from = '2015-10-20', to = Sys.Date()-1)
getSymbols("VGK", src = "yahoo", from = '2016-06-06', to = Sys.Date()-1)
getSymbols("EXC", src = "yahoo", from = '2016-01-19', to = Sys.Date()-1)
getSymbols("", src = "yahoo", from = '', to = Sys.Date()-1)
dat <- map_df(mget(ls(pattern = '[A-Z]{1,5}')), function(x){
tmp <- x %>%
as_tibble(preserve_row_names = TRUE) %>%
mutate(ticker = gsub('([A-Z]+)(\\..*$)','\\1',colnames(x)[2]),
date = as.Date(row.names))
colnames(tmp) <- map_chr(colnames(tmp), function(y){
if(grepl('^[A-Z]+\\.', y)) gsub('([A-Z]+\\.)(.*$)','\\2',y)
else y
})
select(tmp, ticker, date, close = Close, adj_close = Adjusted)
})
View(dat)
sort_inputs <- as_tibble(cbind(
ticker = c('A','B'),
date = as.character(c('2016-01-01', '2016-02-02')),
price = c(1,2),
shares = c(3,4)
)) %>%
filter(ticker != '') %>%
arrange(ticker)
View(sort_inputs)
sort_inputs$ticker[1]
sort_inputs$ticker[[1]]
View(sort_inputs)
